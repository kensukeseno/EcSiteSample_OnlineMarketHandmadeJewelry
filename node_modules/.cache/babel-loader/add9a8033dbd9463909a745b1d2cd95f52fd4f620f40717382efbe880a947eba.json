{"ast":null,"code":"import _toConsumableArray from\"C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";import{Route,Routes}from\"react-router-dom\";import{Home}from\"../pages/Home\";import{Product}from\"../pages/Product\";import{Cart}from\"../pages/Cart\";import{Pay}from\"../pages/Pay\";import{useState}from\"react\";export function Body(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productsInCart=_useState2[0],setProductsInCart=_useState2[1];var _useState3=useState({num:0,price:0}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];// This method is called when a new item is added to cart\nvar handlePurchaseChange=function handlePurchaseChange(purchase){var newPurchaseflag=true;productsInCart.map(function(p){// If the same item is already in cart, add the number of products\n// If not, add the new item as a new item in the list\nif(p.product.productId===purchase.product.productId){p.purchaseAmmount+=purchase.purchaseAmmount;newPurchaseflag=false;}});if(newPurchaseflag){setProductsInCart(function(prevPurchase){return[].concat(_toConsumableArray(prevPurchase),[purchase]);});}// Update cart infomation\nif(purchase.product.price===\"load\")throw new Error(\"Not number\");setCart({num:cart.num+purchase.purchaseAmmount,price:cart.price+purchase.purchaseAmmount*purchase.product.price});};// Delete product in cart (one kind at a time)\nvar handlePurchaseDelete=function handlePurchaseDelete(deleteIndex){var deleteItemNum=productsInCart[deleteIndex].purchaseAmmount;var deleteItemPrice;var deletedArr=productsInCart.filter(function(key,index){if(index===deleteIndex){deleteItemNum=key.purchaseAmmount;if(key.product.price===\"load\")throw new Error(\"Not number\");deleteItemPrice=key.product.price*key.purchaseAmmount;setCart({num:cart.num-deleteItemNum,price:cart.price-deleteItemPrice});}else{return key;}});setProductsInCart(deletedArr);};return _jsx(\"div\",Object.assign({style:{fontSize:\"15px\"}},{children:_jsxs(Routes,{children:[_jsx(Route,{path:\"/\",element:_jsx(Home,{onPurchaseChange:handlePurchaseChange})}),_jsx(Route,{path:\"/product\",element:_jsx(Product,{onPurchaseChange:handlePurchaseChange})}),_jsx(Route,{path:\"/cart\",element:_jsx(Cart,{purchases:productsInCart,purchaseSum:cart,onPurchaseDelete:handlePurchaseDelete})}),_jsx(Route,{path:\"/pay\",element:_jsx(Pay,{})})]})}));}export default Body;","map":{"version":3,"names":["jsx","_jsx","jsxs","_jsxs","Route","Routes","Home","Product","Cart","Pay","useState","Body","productsInCart","setProductsInCart","num","price","cart","setCart","handlePurchaseChange","purchase","newPurchaseflag","map","p","product","productId","purchaseAmmount","prevPurchase","Error","handlePurchaseDelete","deleteIndex","deleteItemNum","deleteItemPrice","deletedArr","filter","key","index","Object","assign","style","fontSize","children","path","element","onPurchaseChange","purchases","purchaseSum","onPurchaseDelete"],"sources":["C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/src/routes/Body.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { Route, Routes } from \"react-router-dom\";\r\nimport { Home } from \"../pages/Home\";\r\nimport { Product } from \"../pages/Product\";\r\nimport { Cart } from \"../pages/Cart\";\r\nimport { Pay } from \"../pages/Pay\";\r\nimport { useState } from \"react\";\r\nexport function Body() {\r\n    const [productsInCart, setProductsInCart] = useState([]);\r\n    const [cart, setCart] = useState({ num: 0, price: 0 });\r\n    // This method is called when a new item is added to cart\r\n    const handlePurchaseChange = (purchase) => {\r\n        let newPurchaseflag = true;\r\n        productsInCart.map((p) => {\r\n            // If the same item is already in cart, add the number of products\r\n            // If not, add the new item as a new item in the list\r\n            if (p.product.productId === purchase.product.productId) {\r\n                p.purchaseAmmount += purchase.purchaseAmmount;\r\n                newPurchaseflag = false;\r\n            }\r\n        });\r\n        if (newPurchaseflag) {\r\n            setProductsInCart((prevPurchase) => [...prevPurchase, purchase]);\r\n        }\r\n        // Update cart infomation\r\n        if (purchase.product.price === \"load\")\r\n            throw new Error(\"Not number\");\r\n        setCart({\r\n            num: cart.num + purchase.purchaseAmmount,\r\n            price: cart.price + purchase.purchaseAmmount * purchase.product.price,\r\n        });\r\n    };\r\n    // Delete product in cart (one kind at a time)\r\n    const handlePurchaseDelete = (deleteIndex) => {\r\n        let deleteItemNum = productsInCart[deleteIndex].purchaseAmmount;\r\n        let deleteItemPrice;\r\n        const deletedArr = productsInCart.filter((key, index) => {\r\n            if (index === deleteIndex) {\r\n                deleteItemNum = key.purchaseAmmount;\r\n                if (key.product.price === \"load\")\r\n                    throw new Error(\"Not number\");\r\n                deleteItemPrice = key.product.price * key.purchaseAmmount;\r\n                setCart({\r\n                    num: cart.num - deleteItemNum,\r\n                    price: cart.price - deleteItemPrice,\r\n                });\r\n            }\r\n            else {\r\n                return key;\r\n            }\r\n        });\r\n        setProductsInCart(deletedArr);\r\n    };\r\n    return (_jsx(\"div\", Object.assign({ style: { fontSize: \"15px\" } }, { children: _jsxs(Routes, { children: [_jsx(Route, { path: \"/\", element: _jsx(Home, { onPurchaseChange: handlePurchaseChange }) }), _jsx(Route, { path: \"/product\", element: _jsx(Product, { onPurchaseChange: handlePurchaseChange }) }), _jsx(Route, { path: \"/cart\", element: _jsx(Cart, { purchases: productsInCart, purchaseSum: cart, onPurchaseDelete: handlePurchaseDelete }) }), _jsx(Route, { path: \"/pay\", element: _jsx(Pay, {}) })] }) })));\r\n}\r\nexport default Body;\r\n"],"mappings":"oVAAA,OAASA,GAAG,GAAIC,KAAI,CAAEC,IAAI,GAAIC,MAAK,KAAQ,mBAAmB,CAC9D,OAASC,KAAK,CAAEC,MAAM,KAAQ,kBAAkB,CAChD,OAASC,IAAI,KAAQ,eAAe,CACpC,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,OAASC,IAAI,KAAQ,eAAe,CACpC,OAASC,GAAG,KAAQ,cAAc,CAClC,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,SAASC,KAAI,EAAG,CACnB,cAA4CD,QAAQ,CAAC,EAAE,CAAC,wCAAjDE,cAAc,eAAEC,iBAAiB,eACxC,eAAwBH,QAAQ,CAAC,CAAEI,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,CAAE,CAAC,CAAC,yCAA/CC,IAAI,eAAEC,OAAO,eACpB;AACA,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAoB,CAAIC,QAAQ,CAAK,CACvC,GAAIC,gBAAe,CAAG,IAAI,CAC1BR,cAAc,CAACS,GAAG,CAAC,SAACC,CAAC,CAAK,CACtB;AACA;AACA,GAAIA,CAAC,CAACC,OAAO,CAACC,SAAS,GAAKL,QAAQ,CAACI,OAAO,CAACC,SAAS,CAAE,CACpDF,CAAC,CAACG,eAAe,EAAIN,QAAQ,CAACM,eAAe,CAC7CL,eAAe,CAAG,KAAK,CAC3B,CACJ,CAAC,CAAC,CACF,GAAIA,eAAe,CAAE,CACjBP,iBAAiB,CAAC,SAACa,YAAY,qCAASA,YAAY,GAAEP,QAAQ,IAAC,CAAC,CACpE,CACA;AACA,GAAIA,QAAQ,CAACI,OAAO,CAACR,KAAK,GAAK,MAAM,CACjC,KAAM,IAAIY,MAAK,CAAC,YAAY,CAAC,CACjCV,OAAO,CAAC,CACJH,GAAG,CAAEE,IAAI,CAACF,GAAG,CAAGK,QAAQ,CAACM,eAAe,CACxCV,KAAK,CAAEC,IAAI,CAACD,KAAK,CAAGI,QAAQ,CAACM,eAAe,CAAGN,QAAQ,CAACI,OAAO,CAACR,KACpE,CAAC,CAAC,CACN,CAAC,CACD;AACA,GAAMa,qBAAoB,CAAG,QAAvBA,qBAAoB,CAAIC,WAAW,CAAK,CAC1C,GAAIC,cAAa,CAAGlB,cAAc,CAACiB,WAAW,CAAC,CAACJ,eAAe,CAC/D,GAAIM,gBAAe,CACnB,GAAMC,WAAU,CAAGpB,cAAc,CAACqB,MAAM,CAAC,SAACC,GAAG,CAAEC,KAAK,CAAK,CACrD,GAAIA,KAAK,GAAKN,WAAW,CAAE,CACvBC,aAAa,CAAGI,GAAG,CAACT,eAAe,CACnC,GAAIS,GAAG,CAACX,OAAO,CAACR,KAAK,GAAK,MAAM,CAC5B,KAAM,IAAIY,MAAK,CAAC,YAAY,CAAC,CACjCI,eAAe,CAAGG,GAAG,CAACX,OAAO,CAACR,KAAK,CAAGmB,GAAG,CAACT,eAAe,CACzDR,OAAO,CAAC,CACJH,GAAG,CAAEE,IAAI,CAACF,GAAG,CAAGgB,aAAa,CAC7Bf,KAAK,CAAEC,IAAI,CAACD,KAAK,CAAGgB,eACxB,CAAC,CAAC,CACN,CAAC,IACI,CACD,MAAOG,IAAG,CACd,CACJ,CAAC,CAAC,CACFrB,iBAAiB,CAACmB,UAAU,CAAC,CACjC,CAAC,CACD,MAAQ/B,KAAI,CAAC,KAAK,CAAEmC,MAAM,CAACC,MAAM,CAAC,CAAEC,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAC,CAAE,CAAEC,QAAQ,CAAErC,KAAK,CAACE,MAAM,CAAE,CAAEmC,QAAQ,CAAE,CAACvC,IAAI,CAACG,KAAK,CAAE,CAAEqC,IAAI,CAAE,GAAG,CAAEC,OAAO,CAAEzC,IAAI,CAACK,IAAI,CAAE,CAAEqC,gBAAgB,CAAEzB,oBAAqB,CAAC,CAAE,CAAC,CAAC,CAAEjB,IAAI,CAACG,KAAK,CAAE,CAAEqC,IAAI,CAAE,UAAU,CAAEC,OAAO,CAAEzC,IAAI,CAACM,OAAO,CAAE,CAAEoC,gBAAgB,CAAEzB,oBAAqB,CAAC,CAAE,CAAC,CAAC,CAAEjB,IAAI,CAACG,KAAK,CAAE,CAAEqC,IAAI,CAAE,OAAO,CAAEC,OAAO,CAAEzC,IAAI,CAACO,IAAI,CAAE,CAAEoC,SAAS,CAAEhC,cAAc,CAAEiC,WAAW,CAAE7B,IAAI,CAAE8B,gBAAgB,CAAElB,oBAAqB,CAAC,CAAE,CAAC,CAAC,CAAE3B,IAAI,CAACG,KAAK,CAAE,CAAEqC,IAAI,CAAE,MAAM,CAAEC,OAAO,CAAEzC,IAAI,CAACQ,GAAG,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAC9f,CACA,cAAeE,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}