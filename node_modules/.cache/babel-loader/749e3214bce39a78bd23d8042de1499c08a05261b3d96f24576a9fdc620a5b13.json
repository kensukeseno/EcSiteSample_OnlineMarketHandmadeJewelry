{"ast":null,"code":"var _s = $RefreshSig$();\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Route, Routes } from \"react-router-dom\";\nimport { Home } from \"../pages/Home\";\nimport { Product } from \"../pages/Product\";\nimport { Cart } from \"../pages/Cart\";\nimport { Pay } from \"../pages/Pay\";\nimport { useState } from \"react\";\nexport function Body() {\n  _s();\n  const [productsInCart, setProductsInCart] = useState([]);\n  const [cart, setCart] = useState({\n    num: 0,\n    price: 0\n  });\n  // This method is called when a new item is added to cart\n  const handlePurchaseChange = purchase => {\n    let newPurchaseflag = true;\n    productsInCart.map(p => {\n      // If the same item is already in cart, add the number of products\n      // If not, add the new item as a new item in the list\n      if (p.product.productId === purchase.product.productId) {\n        p.purchaseAmmount += purchase.purchaseAmmount;\n        newPurchaseflag = false;\n      }\n    });\n    if (newPurchaseflag) {\n      setProductsInCart(prevPurchase => [...prevPurchase, purchase]);\n    }\n    // Update cart infomation\n    if (purchase.product.price === \"load\") throw new Error(\"Not number\");\n    setCart({\n      num: cart.num + purchase.purchaseAmmount,\n      price: cart.price + purchase.purchaseAmmount * purchase.product.price\n    });\n  };\n  // Delete product in cart (one kind at a time)\n  const handlePurchaseDelete = deleteIndex => {\n    let deleteItemNum = productsInCart[deleteIndex].purchaseAmmount;\n    let deleteItemPrice;\n    const deletedArr = productsInCart.filter((key, index) => {\n      if (index === deleteIndex) {\n        deleteItemNum = key.purchaseAmmount;\n        if (key.product.price === \"load\") throw new Error(\"Not number\");\n        deleteItemPrice = key.product.price * key.purchaseAmmount;\n        setCart({\n          num: cart.num - deleteItemNum,\n          price: cart.price - deleteItemPrice\n        });\n      } else {\n        return key;\n      }\n    });\n    setProductsInCart(deletedArr);\n  };\n  return _jsx(\"div\", Object.assign({\n    style: {\n      fontSize: \"15px\"\n    }\n  }, {\n    children: _jsxs(Routes, {\n      children: [_jsx(Route, {\n        path: \"/\",\n        element: _jsx(Home, {\n          onPurchaseChange: handlePurchaseChange\n        })\n      }), _jsx(Route, {\n        path: \"/product\",\n        element: _jsx(Product, {\n          onPurchaseChange: handlePurchaseChange\n        })\n      }), _jsx(Route, {\n        path: \"/cart\",\n        element: _jsx(Cart, {\n          purchases: productsInCart,\n          purchaseSum: cart,\n          onPurchaseDelete: handlePurchaseDelete\n        })\n      }), _jsx(Route, {\n        path: \"/pay\",\n        element: _jsx(Pay, {})\n      })]\n    })\n  }));\n}\n_s(Body, \"ou2B/0bRaWP+s/EOw2gbFgCjYCA=\");\n_c = Body;\nexport default Body;\nvar _c;\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"names":["jsx","_jsx","jsxs","_jsxs","Route","Routes","Home","Product","Cart","Pay","useState","Body","productsInCart","setProductsInCart","cart","setCart","num","price","handlePurchaseChange","purchase","newPurchaseflag","map","p","product","productId","purchaseAmmount","prevPurchase","Error","handlePurchaseDelete","deleteIndex","deleteItemNum","deleteItemPrice","deletedArr","filter","key","index","Object","assign","style","fontSize","children","path","element","onPurchaseChange","purchases","purchaseSum","onPurchaseDelete"],"sources":["C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/src/routes/Body.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { Route, Routes } from \"react-router-dom\";\r\nimport { Home } from \"../pages/Home\";\r\nimport { Product } from \"../pages/Product\";\r\nimport { Cart } from \"../pages/Cart\";\r\nimport { Pay } from \"../pages/Pay\";\r\nimport { useState } from \"react\";\r\nexport function Body() {\r\n    const [productsInCart, setProductsInCart] = useState([]);\r\n    const [cart, setCart] = useState({ num: 0, price: 0 });\r\n    // This method is called when a new item is added to cart\r\n    const handlePurchaseChange = (purchase) => {\r\n        let newPurchaseflag = true;\r\n        productsInCart.map((p) => {\r\n            // If the same item is already in cart, add the number of products\r\n            // If not, add the new item as a new item in the list\r\n            if (p.product.productId === purchase.product.productId) {\r\n                p.purchaseAmmount += purchase.purchaseAmmount;\r\n                newPurchaseflag = false;\r\n            }\r\n        });\r\n        if (newPurchaseflag) {\r\n            setProductsInCart((prevPurchase) => [...prevPurchase, purchase]);\r\n        }\r\n        // Update cart infomation\r\n        if (purchase.product.price === \"load\")\r\n            throw new Error(\"Not number\");\r\n        setCart({\r\n            num: cart.num + purchase.purchaseAmmount,\r\n            price: cart.price + purchase.purchaseAmmount * purchase.product.price,\r\n        });\r\n    };\r\n    // Delete product in cart (one kind at a time)\r\n    const handlePurchaseDelete = (deleteIndex) => {\r\n        let deleteItemNum = productsInCart[deleteIndex].purchaseAmmount;\r\n        let deleteItemPrice;\r\n        const deletedArr = productsInCart.filter((key, index) => {\r\n            if (index === deleteIndex) {\r\n                deleteItemNum = key.purchaseAmmount;\r\n                if (key.product.price === \"load\")\r\n                    throw new Error(\"Not number\");\r\n                deleteItemPrice = key.product.price * key.purchaseAmmount;\r\n                setCart({\r\n                    num: cart.num - deleteItemNum,\r\n                    price: cart.price - deleteItemPrice,\r\n                });\r\n            }\r\n            else {\r\n                return key;\r\n            }\r\n        });\r\n        setProductsInCart(deletedArr);\r\n    };\r\n    return (_jsx(\"div\", Object.assign({ style: { fontSize: \"15px\" } }, { children: _jsxs(Routes, { children: [_jsx(Route, { path: \"/\", element: _jsx(Home, { onPurchaseChange: handlePurchaseChange }) }), _jsx(Route, { path: \"/product\", element: _jsx(Product, { onPurchaseChange: handlePurchaseChange }) }), _jsx(Route, { path: \"/cart\", element: _jsx(Cart, { purchases: productsInCart, purchaseSum: cart, onPurchaseDelete: handlePurchaseDelete }) }), _jsx(Route, { path: \"/pay\", element: _jsx(Pay, {}) })] }) })));\r\n}\r\nexport default Body;\r\n"],"mappings":";AAAA,SAASA,GAAG,IAAIC,IAAI,EAAEC,IAAI,IAAIC,KAAK,QAAQ,mBAAmB;AAC9D,SAASC,KAAK,EAAEC,MAAM,QAAQ,kBAAkB;AAChD,SAASC,IAAI,QAAQ,eAAe;AACpC,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,SAASC,IAAI,QAAQ,eAAe;AACpC,SAASC,GAAG,QAAQ,cAAc;AAClC,SAASC,QAAQ,QAAQ,OAAO;AAChC,OAAO,SAASC,IAAI,GAAG;EAAA;EACnB,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGH,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACI,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC;IAAEM,GAAG,EAAE,CAAC;IAAEC,KAAK,EAAE;EAAE,CAAC,CAAC;EACtD;EACA,MAAMC,oBAAoB,GAAIC,QAAQ,IAAK;IACvC,IAAIC,eAAe,GAAG,IAAI;IAC1BR,cAAc,CAACS,GAAG,CAAEC,CAAC,IAAK;MACtB;MACA;MACA,IAAIA,CAAC,CAACC,OAAO,CAACC,SAAS,KAAKL,QAAQ,CAACI,OAAO,CAACC,SAAS,EAAE;QACpDF,CAAC,CAACG,eAAe,IAAIN,QAAQ,CAACM,eAAe;QAC7CL,eAAe,GAAG,KAAK;MAC3B;IACJ,CAAC,CAAC;IACF,IAAIA,eAAe,EAAE;MACjBP,iBAAiB,CAAEa,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAEP,QAAQ,CAAC,CAAC;IACpE;IACA;IACA,IAAIA,QAAQ,CAACI,OAAO,CAACN,KAAK,KAAK,MAAM,EACjC,MAAM,IAAIU,KAAK,CAAC,YAAY,CAAC;IACjCZ,OAAO,CAAC;MACJC,GAAG,EAAEF,IAAI,CAACE,GAAG,GAAGG,QAAQ,CAACM,eAAe;MACxCR,KAAK,EAAEH,IAAI,CAACG,KAAK,GAAGE,QAAQ,CAACM,eAAe,GAAGN,QAAQ,CAACI,OAAO,CAACN;IACpE,CAAC,CAAC;EACN,CAAC;EACD;EACA,MAAMW,oBAAoB,GAAIC,WAAW,IAAK;IAC1C,IAAIC,aAAa,GAAGlB,cAAc,CAACiB,WAAW,CAAC,CAACJ,eAAe;IAC/D,IAAIM,eAAe;IACnB,MAAMC,UAAU,GAAGpB,cAAc,CAACqB,MAAM,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;MACrD,IAAIA,KAAK,KAAKN,WAAW,EAAE;QACvBC,aAAa,GAAGI,GAAG,CAACT,eAAe;QACnC,IAAIS,GAAG,CAACX,OAAO,CAACN,KAAK,KAAK,MAAM,EAC5B,MAAM,IAAIU,KAAK,CAAC,YAAY,CAAC;QACjCI,eAAe,GAAGG,GAAG,CAACX,OAAO,CAACN,KAAK,GAAGiB,GAAG,CAACT,eAAe;QACzDV,OAAO,CAAC;UACJC,GAAG,EAAEF,IAAI,CAACE,GAAG,GAAGc,aAAa;UAC7Bb,KAAK,EAAEH,IAAI,CAACG,KAAK,GAAGc;QACxB,CAAC,CAAC;MACN,CAAC,MACI;QACD,OAAOG,GAAG;MACd;IACJ,CAAC,CAAC;IACFrB,iBAAiB,CAACmB,UAAU,CAAC;EACjC,CAAC;EACD,OAAQ/B,IAAI,CAAC,KAAK,EAAEmC,MAAM,CAACC,MAAM,CAAC;IAAEC,KAAK,EAAE;MAAEC,QAAQ,EAAE;IAAO;EAAE,CAAC,EAAE;IAAEC,QAAQ,EAAErC,KAAK,CAACE,MAAM,EAAE;MAAEmC,QAAQ,EAAE,CAACvC,IAAI,CAACG,KAAK,EAAE;QAAEqC,IAAI,EAAE,GAAG;QAAEC,OAAO,EAAEzC,IAAI,CAACK,IAAI,EAAE;UAAEqC,gBAAgB,EAAEzB;QAAqB,CAAC;MAAE,CAAC,CAAC,EAAEjB,IAAI,CAACG,KAAK,EAAE;QAAEqC,IAAI,EAAE,UAAU;QAAEC,OAAO,EAAEzC,IAAI,CAACM,OAAO,EAAE;UAAEoC,gBAAgB,EAAEzB;QAAqB,CAAC;MAAE,CAAC,CAAC,EAAEjB,IAAI,CAACG,KAAK,EAAE;QAAEqC,IAAI,EAAE,OAAO;QAAEC,OAAO,EAAEzC,IAAI,CAACO,IAAI,EAAE;UAAEoC,SAAS,EAAEhC,cAAc;UAAEiC,WAAW,EAAE/B,IAAI;UAAEgC,gBAAgB,EAAElB;QAAqB,CAAC;MAAE,CAAC,CAAC,EAAE3B,IAAI,CAACG,KAAK,EAAE;QAAEqC,IAAI,EAAE,MAAM;QAAEC,OAAO,EAAEzC,IAAI,CAACQ,GAAG,EAAE,CAAC,CAAC;MAAE,CAAC,CAAC;IAAE,CAAC;EAAE,CAAC,CAAC,CAAC;AAC9f;AAAC,GA/CeE,IAAI;AAAA,KAAJA,IAAI;AAgDpB,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}