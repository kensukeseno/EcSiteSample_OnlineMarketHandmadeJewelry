{"ast":null,"code":"\"use strict\";import _toConsumableArray from\"C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.Body=void 0;var jsx_runtime_1=require(\"react/jsx-runtime\");var react_router_dom_1=require(\"react-router-dom\");var Home_1=require(\"../pages/Home\");var Product_1=require(\"../pages/Product\");var Cart_1=require(\"../pages/Cart\");var Pay_1=require(\"../pages/Pay\");var react_1=require(\"react\");function Body(){var _ref=(0,react_1.useState)([]),_ref2=_slicedToArray(_ref,2),productsInCart=_ref2[0],setProductsInCart=_ref2[1];var _ref3=(0,react_1.useState)({num:0,price:0}),_ref4=_slicedToArray(_ref3,2),cart=_ref4[0],setCart=_ref4[1];// This method is called when a new item is added to cart\nvar handlePurchaseChange=function handlePurchaseChange(purchase){var newPurchaseflag=true;productsInCart.map(function(p){// If the same item is already in cart, add the number of products\n// If not, add the new item as a new item in the list\nif(p.product.productId===purchase.product.productId){p.purchaseAmmount+=purchase.purchaseAmmount;newPurchaseflag=false;}});if(newPurchaseflag){setProductsInCart(function(prevPurchase){return[].concat(_toConsumableArray(prevPurchase),[purchase]);});}// Update cart infomation\nif(purchase.product.price===\"load\")throw new Error(\"Not number\");setCart({num:cart.num+purchase.purchaseAmmount,price:cart.price+purchase.purchaseAmmount*purchase.product.price});};// Delete product in cart (one kind at a time)\nvar handlePurchaseDelete=function handlePurchaseDelete(deleteIndex){var deleteItemNum=productsInCart[deleteIndex].purchaseAmmount;var deleteItemPrice;var deletedArr=productsInCart.filter(function(key,index){if(index===deleteIndex){deleteItemNum=key.purchaseAmmount;if(key.product.price===\"load\")throw new Error(\"Not number\");deleteItemPrice=key.product.price*key.purchaseAmmount;setCart({num:cart.num-deleteItemNum,price:cart.price-deleteItemPrice});}else{return key;}});setProductsInCart(deletedArr);};return(0,jsx_runtime_1.jsx)(\"div\",Object.assign({style:{fontSize:\"15px\"}},{children:(0,jsx_runtime_1.jsxs)(react_router_dom_1.Routes,{children:[(0,jsx_runtime_1.jsx)(react_router_dom_1.Route,{path:\"/\",element:(0,jsx_runtime_1.jsx)(Home_1.Home,{onPurchaseChange:handlePurchaseChange})}),(0,jsx_runtime_1.jsx)(react_router_dom_1.Route,{path:\"/product\",element:(0,jsx_runtime_1.jsx)(Product_1.Product,{onPurchaseChange:handlePurchaseChange})}),(0,jsx_runtime_1.jsx)(react_router_dom_1.Route,{path:\"/cart\",element:(0,jsx_runtime_1.jsx)(Cart_1.Cart,{purchases:productsInCart,purchaseSum:cart,onPurchaseDelete:handlePurchaseDelete})}),(0,jsx_runtime_1.jsx)(react_router_dom_1.Route,{path:\"/pay\",element:(0,jsx_runtime_1.jsx)(Pay_1.Pay,{})})]})}));}exports.Body=Body;exports.default=Body;","map":{"version":3,"names":["Object","defineProperty","exports","value","Body","jsx_runtime_1","require","react_router_dom_1","Home_1","Product_1","Cart_1","Pay_1","react_1","useState","productsInCart","setProductsInCart","num","price","cart","setCart","handlePurchaseChange","purchase","newPurchaseflag","map","p","product","productId","purchaseAmmount","prevPurchase","Error","handlePurchaseDelete","deleteIndex","deleteItemNum","deleteItemPrice","deletedArr","filter","key","index","jsx","assign","style","fontSize","children","jsxs","Routes","Route","path","element","Home","onPurchaseChange","Product","Cart","purchases","purchaseSum","onPurchaseDelete","Pay","default"],"sources":["C:/Users/kensu/node_project/EcSiteSample_OnlineMarketHandmadeJewelry_front_react/src/routes/Body.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Body = void 0;\r\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\r\nconst react_router_dom_1 = require(\"react-router-dom\");\r\nconst Home_1 = require(\"../pages/Home\");\r\nconst Product_1 = require(\"../pages/Product\");\r\nconst Cart_1 = require(\"../pages/Cart\");\r\nconst Pay_1 = require(\"../pages/Pay\");\r\nconst react_1 = require(\"react\");\r\nfunction Body() {\r\n    const [productsInCart, setProductsInCart] = (0, react_1.useState)([]);\r\n    const [cart, setCart] = (0, react_1.useState)({ num: 0, price: 0 });\r\n    // This method is called when a new item is added to cart\r\n    const handlePurchaseChange = (purchase) => {\r\n        let newPurchaseflag = true;\r\n        productsInCart.map((p) => {\r\n            // If the same item is already in cart, add the number of products\r\n            // If not, add the new item as a new item in the list\r\n            if (p.product.productId === purchase.product.productId) {\r\n                p.purchaseAmmount += purchase.purchaseAmmount;\r\n                newPurchaseflag = false;\r\n            }\r\n        });\r\n        if (newPurchaseflag) {\r\n            setProductsInCart((prevPurchase) => [...prevPurchase, purchase]);\r\n        }\r\n        // Update cart infomation\r\n        if (purchase.product.price === \"load\")\r\n            throw new Error(\"Not number\");\r\n        setCart({\r\n            num: cart.num + purchase.purchaseAmmount,\r\n            price: cart.price + purchase.purchaseAmmount * purchase.product.price,\r\n        });\r\n    };\r\n    // Delete product in cart (one kind at a time)\r\n    const handlePurchaseDelete = (deleteIndex) => {\r\n        let deleteItemNum = productsInCart[deleteIndex].purchaseAmmount;\r\n        let deleteItemPrice;\r\n        const deletedArr = productsInCart.filter((key, index) => {\r\n            if (index === deleteIndex) {\r\n                deleteItemNum = key.purchaseAmmount;\r\n                if (key.product.price === \"load\")\r\n                    throw new Error(\"Not number\");\r\n                deleteItemPrice = key.product.price * key.purchaseAmmount;\r\n                setCart({\r\n                    num: cart.num - deleteItemNum,\r\n                    price: cart.price - deleteItemPrice,\r\n                });\r\n            }\r\n            else {\r\n                return key;\r\n            }\r\n        });\r\n        setProductsInCart(deletedArr);\r\n    };\r\n    return ((0, jsx_runtime_1.jsx)(\"div\", Object.assign({ style: { fontSize: \"15px\" } }, { children: (0, jsx_runtime_1.jsxs)(react_router_dom_1.Routes, { children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: \"/\", element: (0, jsx_runtime_1.jsx)(Home_1.Home, { onPurchaseChange: handlePurchaseChange }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: \"/product\", element: (0, jsx_runtime_1.jsx)(Product_1.Product, { onPurchaseChange: handlePurchaseChange }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: \"/cart\", element: (0, jsx_runtime_1.jsx)(Cart_1.Cart, { purchases: productsInCart, purchaseSum: cart, onPurchaseDelete: handlePurchaseDelete }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: \"/pay\", element: (0, jsx_runtime_1.jsx)(Pay_1.Pay, {}) })] }) })));\r\n}\r\nexports.Body = Body;\r\nexports.default = Body;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}